var y=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var U=Object.prototype.hasOwnProperty;var Z=e=>y(e,"__esModule",{value:!0});var B=(e,a)=>{for(var r in a)y(e,r,{get:a[r],enumerable:!0})},G=(e,a,r,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let t of Q(a))!U.call(e,t)&&(r||t!=="default")&&y(e,t,{get:()=>a[t],enumerable:!(n=P(a,t))||n.enumerable});return e};var J=(e=>(a,r)=>e&&e.get(a)||(r=G(Z({}),a,1),e&&e.set(a,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var ot={};B(ot,{Route:()=>D,active:()=>Y,meta:()=>x,router:()=>p});var l=require("svelte/internal");var C=require("svelte"),j=require("svelte/store"),ht=require("svelte/store"),m=require("svelte"),W=require("svelte/store");function O(e,a=!1){return e=e.slice(e.startsWith("/#")?2:0,e.endsWith("/*")?-2:void 0),e.startsWith("/")||(e="/"+e),e==="/"&&(e=""),a&&!e.endsWith("/")&&(e+="/"),e}function A(e,a){e=O(e,!0),a=O(a,!0);let r=[],n={},t=!0,i=e.split("/").map(c=>c.startsWith(":")?(r.push(c.slice(1)),"([^\\/]+)"):c).join("\\/"),s=a.match(new RegExp(`^${i}$`));return s||(t=!1,s=a.match(new RegExp(`^${i}`))),s?(r.forEach((c,d)=>n[c]=s[d+1]),{exact:t,params:n,part:s[0].slice(0,-1)}):null}function E(e,a,r){if(r==="")return e;if(r[0]==="/")return r;let n=s=>s.split("/").filter(c=>c!==""),t=n(e),i=a?n(a):[];return"/"+i.map((s,c)=>t[c]).join("/")+"/"+r}function g(e,a,r,n){let t=[a,"data-"+a].reduce((i,s)=>{let c=e.getAttribute(s);return r&&e.removeAttribute(s),c===null?i:c},!1);return!n&&t===""?!0:t||n||!1}function V(e){let a=e.split("&").map(r=>r.split("=")).reduce((r,n)=>{let t=n[0];if(!t)return r;let i=n.length>1?n[n.length-1]:!0;return typeof i=="string"&&i.includes(",")&&(i=i.split(",")),r[t]===void 0?r[t]=[i]:r[t].push(i),r},{});return Object.entries(a).reduce((r,n)=>(r[n[0]]=n[1].length>1?n[1]:n[1][0],r),{})}function X(e){return Object.entries(e).map(([a,r])=>r?r===!0?a:`${a}=${Array.isArray(r)?r.join(","):r}`:null).filter(a=>a).join("&")}function v(e,a){return e?a+e:""}function F(e){throw new Error("[Tinro] "+e)}var f={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run(e,a,r,n){return e===this.HISTORY?a&&a():e===this.HASH?r&&r():n&&n()},getDefault(){return!window||window.location.pathname==="srcdoc"?this.MEMORY:this.HISTORY}},S,M,q,w="",h=$();function $(){let e=f.getDefault(),a,r=s=>window.onhashchange=window.onpopstate=S=null,n=s=>a&&a(R(e)),t=s=>{s&&(e=s),r(),e!==f.OFF&&f.run(e,c=>window.onpopstate=n,c=>window.onhashchange=n)&&n()},i=s=>{let c=Object.assign(R(e),s);return c.path+v(X(c.query),"?")+v(c.hash,"#")};return{mode:t,get:s=>R(e),go(s,c){tt(e,s,c),n()},start(s){a=s,t()},stop(){a=null,t(f.OFF)},set(s){this.go(i(s),!s.path)},methods(){return et(this)},base:s=>w=s}}function tt(e,a,r){!r&&(M=q);let n=t=>history[`${r?"replace":"push"}State`]({},"",t);f.run(e,t=>n(w+a),t=>n(`#${a}`),t=>S=a)}function R(e){let a=window.location,r=f.run(e,t=>(w?a.pathname.replace(w,""):a.pathname)+a.search+a.hash,t=>String(a.hash.slice(1)||"/"),t=>S||"/"),n=r.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return q=r,{url:r,from:M,path:n[1]||"",query:V(n[2]||""),hash:n[3]||""}}function et(e){let a=()=>e.get().query,r=s=>e.set({query:s}),n=s=>r(s(a())),t=()=>e.get().hash,i=s=>e.set({hash:s});return{hash:{get:t,set:i,clear:()=>i("")},query:{replace:r,clear:()=>r(""),get(s){return s?a()[s]:a()},set(s,c){n(d=>(d[s]=c,d))},delete(s){n(c=>(c[s]&&delete c[s],c))}}}}var p=at();function at(){let{subscribe:e}=(0,j.writable)(h.get(),a=>{h.start(a);let r=rt(h.go);return()=>{h.stop(),r()}});return{subscribe:e,goto:h.go,params:nt,meta:x,useHashNavigation:a=>h.mode(a?f.HASH:f.HISTORY),mode:{hash:()=>h.mode(f.HASH),history:()=>h.mode(f.HISTORY),memory:()=>h.mode(f.MEMORY)},base:h.base,location:h.methods()}}function Y(e){let a,r,n,t,i=()=>{a=g(e,"href").replace(/^\/#|[?#].*$|\/$/g,""),r=g(e,"exact",!0),n=g(e,"active-class",!0,"active")},s=()=>{let c=A(a,t);c&&(c.exact&&r||!r)?e.classList.add(n):e.classList.remove(n)};return i(),{destroy:p.subscribe(c=>{t=c.path,s()}),update:()=>{i(),s()}}}function rt(e){let a=r=>{let n=r.target.closest("a[href]"),t=n&&g(n,"target",!1,"_self"),i=n&&g(n,"tinro-ignore"),s=r.ctrlKey||r.metaKey||r.altKey||r.shiftKey;if(t=="_self"&&!i&&!s&&n){let c=n.getAttribute("href").replace(/^\/#/,"");/^\/\/|^#|^[a-zA-Z]+:/.test(c)||(r.preventDefault(),e(c.startsWith("/")?c:n.href.replace(window.location.origin,"")))}};return addEventListener("click",a),()=>removeEventListener("click",a)}function nt(){return(0,C.getContext)("tinro").meta.params}var k="tinro",st=T({pattern:"",matched:!0});function z(e){let a=(0,m.getContext)(k)||st;(a.exact||a.fallback)&&F(`${e.fallback?"<Route fallback>":`<Route path="${e.path}">`}  can't be inside ${a.fallback?"<Route fallback>":`<Route path="${a.path||"/"}"> with exact path`}`);let r=e.fallback?"fallbacks":"childs",n=(0,W.writable)({}),t=T({fallback:e.fallback,parent:a,update(i){t.exact=!i.path.endsWith("/*"),t.pattern=O(`${t.parent.pattern||""}${i.path}`),t.redirect=i.redirect,t.firstmatch=i.firstmatch,t.breadcrumb=i.breadcrumb,t.match()},register:()=>(t.parent[r].add(t),async()=>{t.parent[r].delete(t),t.parent.activeChilds.delete(t),t.router.un&&t.router.un(),t.parent.match()}),show:()=>{e.onShow(),!t.fallback&&t.parent.activeChilds.add(t)},hide:()=>{e.onHide(),t.parent.activeChilds.delete(t)},match:async()=>{t.matched=!1;let{path:i,url:s,from:c,query:d}=t.router.location,u=A(t.pattern,i);if(!t.fallback&&u&&t.redirect&&(!t.exact||t.exact&&u.exact)){let b=E(i,t.parent.pattern,t.redirect);return p.goto(b,!0)}t.meta=u&&{from:c,url:s,query:d,match:u.part,pattern:t.pattern,breadcrumbs:t.parent.meta&&t.parent.meta.breadcrumbs.slice()||[],params:u.params,subscribe:n.subscribe},t.breadcrumb&&t.meta&&t.meta.breadcrumbs.push({name:t.breadcrumb,path:u.part}),n.set(t.meta),u&&!t.fallback&&(!t.exact||t.exact&&u.exact)&&(!t.parent.firstmatch||!t.parent.matched)?(e.onMeta(t.meta),t.parent.matched=!0,t.show()):t.hide(),u&&t.showFallbacks()}});return(0,m.setContext)(k,t),(0,m.onMount)(()=>t.register()),t}function x(){return(0,m.hasContext)(k)?(0,m.getContext)(k).meta:F("meta() function must be run inside any `<Route>` child component only")}function T(e){let a={router:{},exact:!1,pattern:null,meta:null,parent:null,fallback:!1,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,async showFallbacks(){if(!this.fallback&&(await(0,m.tick)(),this.childs.size>0&&this.activeChilds.size==0||this.childs.size==0&&this.fallbacks.size>0)){let r=this;for(;r.fallbacks.size==0;)if(r=r.parent,!r)return;r&&r.fallbacks.forEach(n=>{if(n.redirect){let t=E("/",n.parent.pattern,n.redirect);p.goto(t,!0)}else n.show()})}},start(){this.router.un||(this.router.un=p.subscribe(r=>{this.router.location=r,this.pattern!==null&&this.match()}))},match(){this.showFallbacks()}};return Object.assign(a,e),a.start(),a}var it=e=>({params:e&2,meta:e&4}),I=e=>({params:e[1],meta:e[2]});function K(e){let a,r=e[9].default,n=(0,l.create_slot)(r,e,e[8],I);return{c(){n&&n.c()},m(t,i){n&&n.m(t,i),a=!0},p(t,i){n&&n.p&&(!a||i&262)&&(0,l.update_slot_base)(n,r,t,t[8],a?(0,l.get_slot_changes)(r,t[8],i,it):(0,l.get_all_dirty_from_scope)(t[8]),I)},i(t){a||((0,l.transition_in)(n,t),a=!0)},o(t){(0,l.transition_out)(n,t),a=!1},d(t){n&&n.d(t)}}}function ct(e){let a,r,n=e[0]&&K(e);return{c(){n&&n.c(),a=(0,l.empty)()},m(t,i){n&&n.m(t,i),(0,l.insert)(t,a,i),r=!0},p(t,[i]){t[0]?n?(n.p(t,i),i&1&&(0,l.transition_in)(n,1)):(n=K(t),n.c(),(0,l.transition_in)(n,1),n.m(a.parentNode,a)):n&&((0,l.group_outros)(),(0,l.transition_out)(n,1,1,()=>{n=null}),(0,l.check_outros)())},i(t){r||((0,l.transition_in)(n),r=!0)},o(t){(0,l.transition_out)(n),r=!1},d(t){n&&n.d(t),t&&(0,l.detach)(a)}}}function lt(e,a,r){let{$$slots:n={},$$scope:t}=a,{path:i="/*"}=a,{fallback:s=!1}=a,{redirect:c=!1}=a,{firstmatch:d=!1}=a,{breadcrumb:u=null}=a,b=!1,H={},_={},N=z({fallback:s,onShow(){r(0,b=!0)},onHide(){r(0,b=!1)},onMeta(o){r(2,_=o),r(1,H=_.params)}});return e.$$set=o=>{"path"in o&&r(3,i=o.path),"fallback"in o&&r(4,s=o.fallback),"redirect"in o&&r(5,c=o.redirect),"firstmatch"in o&&r(6,d=o.firstmatch),"breadcrumb"in o&&r(7,u=o.breadcrumb),"$$scope"in o&&r(8,t=o.$$scope)},e.$$.update=()=>{if(e.$$.dirty&232){t:N.update({path:i,redirect:c,firstmatch:d,breadcrumb:u})}},[b,H,_,i,s,c,d,u,t,n]}var L=class extends l.SvelteComponent{constructor(a){super();(0,l.init)(this,a,lt,ct,l.safe_not_equal,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}},D=L;module.exports=J(ot);
